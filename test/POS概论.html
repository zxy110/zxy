<!DOCTYPE html>













<html class="theme-next pisces" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">


























<link rel="stylesheet" href="/zxy/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/zxy/css/main.css?v=7.0.1">


  <link rel="apple-touch-icon" sizes="180x180" href="/zxy/images/apple-touch-icon-next.png?v=7.0.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/zxy/images/favicon-32x32-next.png?v=7.0.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/zxy/images/favicon-16x16-next.png?v=7.0.1">


  <link rel="mask-icon" href="/zxy/images/logo.svg?v=7.0.1" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/zxy/',
    scheme: 'Pisces',
    version: '7.0.1',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false,"dimmer":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="POS概论 因为对VRF的场景有误导，故来研究一下POS的前世今生(误)。所有作为“引言”的话都是和VRF有关的东西。  一 最初的POS (来源)​    2012年，化名Sunny King的网友推出了Peercoin（点点币，PPC），该加密电子货币采用工作量证明机制发行新币，采用权益证明机制维护网络安全，这是权益证明机制在加密电子货币中的首次应用。 ​    与要求证明人执行一定量的计算工">
<meta property="og:type" content="website">
<meta property="og:title" content="Sarah&#39;s Blogs">
<meta property="og:url" content="https://zxy110.github.io/zxy/test/POS概论.html">
<meta property="og:site_name" content="Sarah&#39;s Blogs">
<meta property="og:description" content="POS概论 因为对VRF的场景有误导，故来研究一下POS的前世今生(误)。所有作为“引言”的话都是和VRF有关的东西。  一 最初的POS (来源)​    2012年，化名Sunny King的网友推出了Peercoin（点点币，PPC），该加密电子货币采用工作量证明机制发行新币，采用权益证明机制维护网络安全，这是权益证明机制在加密电子货币中的首次应用。 ​    与要求证明人执行一定量的计算工">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2019-03-01T08:14:35.847Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Sarah&#39;s Blogs">
<meta name="twitter:description" content="POS概论 因为对VRF的场景有误导，故来研究一下POS的前世今生(误)。所有作为“引言”的话都是和VRF有关的东西。  一 最初的POS (来源)​    2012年，化名Sunny King的网友推出了Peercoin（点点币，PPC），该加密电子货币采用工作量证明机制发行新币，采用权益证明机制维护网络安全，这是权益证明机制在加密电子货币中的首次应用。 ​    与要求证明人执行一定量的计算工">






  <link rel="canonical" href="https://zxy110.github.io/zxy/test/POS概论.html">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title> | Sarah's Blogs</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/zxy/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Sarah's Blogs</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/zxy/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/zxy/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/zxy/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/zxy/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

    
    
      
      
    
      
      
    
      
      
    
      
      
    
    

  


          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    
    
    
    <div class="post-block page">
      <header class="post-header">

<h1 class="post-title" itemprop="name headline">

</h1>

<div class="post-meta">
  
  



</div>

</header>

      
      
      
      <div class="post-body">
        
        
          <h1 id="POS概论"><a href="#POS概论" class="headerlink" title="POS概论"></a>POS概论</h1><blockquote>
<p>因为对VRF的场景有误导，故来研究一下POS的前世今生(误)。所有作为“引言”的话都是和VRF有关的东西。</p>
</blockquote>
<h4 id="一-最初的POS-来源"><a href="#一-最初的POS-来源" class="headerlink" title="一 最初的POS (来源)"></a>一 最初的POS <a href="https://baike.baidu.com/item/%E6%9D%83%E7%9B%8A%E8%AF%81%E6%98%8E#reference-[1]-23059550-wrap" target="_blank" rel="noopener">(来源)</a></h4><p>​    2012年，化名Sunny King的网友推出了Peercoin（点点币，PPC），该加密电子货币采用工作量证明机制发行新币，采用权益证明机制维护网络安全，这是权益证明机制在加密电子货币中的首次应用。</p>
<p>​    与要求证明人执行一定量的计算工作不同，权益证明要求证明人提供一定数量加密货币的所有权即可。权益证明机制的运作方式是，当创造一个新区块时，矿工需要创建一个“币权”交易，交易会按照预先设定的比例把一些币发送给矿工本身。<strong>权益证明机制根据每个节点拥有代币的比例和时间，依据算法等比例地降低节点的挖矿难度，从而加快了寻找随机数的速度。</strong>这种共识机制可以缩短达成共识所需的时间，但本质上仍然需要网络中的节点进行挖矿运算。因此，PoS机制并没有从根本上解决PoW机制难以应用于商业领域的问题。</p>
<blockquote>
<p>PPC中在计算交易的哈希值时，合法区块被定义为<strong>SHA256D（nStakeModifier + txPrev.block.nTime + txPrev.offset + txPrev.nTime + txPrev.vout.n + nTime）&lt; bnTarget X nCoinDayWeight </strong>，其中有一个参数nStakeModifier，是专门为POS设计的调节器。</p>
<p>因为按照公式，如果没有参数nStakeModifier，当一个人收到一笔币之后，他立即就能提前计算得知自己在未来何时可以锻造区块，这显然不符合设计目标，Sunny King希望POS矿工和POW矿工一样做盲目探索，以实时在线维护区块链，nStakeModifier的设计就是为了防止POS矿工提前计算。nStakeModifier可以理解为POS区块的一个属性，每一个区块对应一个nS takeModifier值，但nStakeModifier并不是每个区块都变动，不过协议规定每隔一定时间Cmodifier interval）必须重新计算一次，取值与前一个nStakeModifier以及最新区块哈希值有关，因此POS矿工无法提前计算，因为他不知道未来的区块哈希值。</p>
<p>也就是说，在PPC系统中，除了存在区块链、币链（币的交易签名历史），还有一个权益调节器链条。</p>
</blockquote>
<h4 id="二-POS的演变-来源"><a href="#二-POS的演变-来源" class="headerlink" title="二 POS的演变 (来源)"></a>二 POS的演变 <a href="https://ethfans.org/posts/Proof-of-Stake-FAQ-new-2018-3-15" target="_blank" rel="noopener">(来源)</a></h4><p>在以太坊Github上的《Proof of Stake FAQ》中，讲POS定义为“权益证明（POS）是一类应用于公共区块链的共识算法，取决于验证者在网络中的经济权益”。在基于权益证明的公共区块链（如Casper协议）中，一组验证者轮流提议并票决下一个区块，而每位验证者的投票权重取决于其保证金额的大小(即权益)。</p>
<p>通常来说，权益证明算法中，区块链会追踪一个验证者集，而任何持有该区块链的基础加密货币（对以太坊来说就是以太币）的人都可以通过<strong>发送一种将以太币锁定为保证金*的特殊交易成为验证者</strong>。随后，<strong>创造并认可新区块的过程可通过当前所有验证者均可参与的共识算法来完成</strong>。 </p>
<p>共识算法及对验证者的激励机制有很多种，因此POS也有很多“风格”。从算法的角度看，主要是两种：<strong>基于区块链的权益证明</strong>和<strong>拜占庭容错(BFT)型权益证明</strong>。</p>
<ul>
<li><strong>基于区块链的权益证明: </strong> 共识算法在每个时段内伪随机地选择一个验证者（例如，每10秒钟为一个时间段），赋予该验证者出块的权力，新创造的区块必须跟在之前的某个区块（通常是位于最长链的末端的区块）后面。因此，随着时间的推移，大多数区块会填加到同一条区块链上，使之不断增长。</li>
<li><strong>拜占庭容错型权益证明: </strong>虽然提议区块的权力会随机分配给验证者，但是决定哪一个区块是“合法的”要通过一个多轮过程来完成。每个验证者在每一轮都会给某个特定的区块投出一票，在这个多轮过程的最后，所有（诚实并联网的）验证者会就是否将这个区块添加到链上做出最终决定。要注意的是这些区块可能仍然链接在一起，其关键区别在于对一个区块的共识可以仅限于这个区块本身，与它后面的那条链的长度和大小无关。</li>
</ul>
<p>工作量证明算法和基于区块链的权益证明算法选择了可用性而非一致性，然而拜占庭容错型共识算法更青睐一致性；Tendermint 明确选择了一致性，Casper 采用的混合模型虽然偏向可用性，却又尽可能地实现一致性，让链上应用和客户端在任何时候都能感觉到强有力的一致性保障。 </p>
<blockquote>
<h4 id="验证者选择机制是如何工作的，什么是“权益研磨（Grinding）”？"><a href="#验证者选择机制是如何工作的，什么是“权益研磨（Grinding）”？" class="headerlink" title="验证者选择机制是如何工作的，什么是“权益研磨（Grinding）”？"></a>验证者选择机制是如何工作的，什么是“权益研磨（Grinding）”？</h4><p>​    在任何基于区块链的权益证明算法中，都需要某种机制，来随机从当前活跃验证者集合中选择能够产生下一个区块的验证者。举个例子，如果当前活跃的验证者集合由持有40以太币的 Alice，持有 30 以太币的 Bob，持有 20 以太币的 Charlie 与持有 10 以太币的 David 组成，那么你想让 Alice 成为下一个区块的创建者的概率为 40%，而 Bob 的概率为 30% 等（在实践中，不仅要随机选择一个验证者，而是要（随机产生）一个无限验证者序列，只有这样如果 Alice 不在线的时候，就可以有其他人在过段时间替代她，但是这并没有改变问题的本质）。在非基于区块链的算法中，出于不同的原因也经常需要考虑随机性。</p>
<p>​    “权益研磨” 是一种攻击类型，在这种攻击中，验证者通过执行一些计算或者采取某些其他措施使得随机性更偏向他们（也就是说，让他们有更大概率成为产生下一个区块的验证者）。例如：</p>
<ol>
<li>在 Peercoin（点点币) 中，验证者可以“研磨”许多参数组合 ，并找到最有利的参数来增加它们的币产生合法区块的可能性。</li>
<li>在一个现已不存在的实现中，第N+1个区块的随机性取决于第N个区块的签名。这就允许验证者反复产生新签名，直到找到允许他们产生下一个区块的签名，从而永远掌握系统的控制权。</li>
<li>在 NXT 中，第 N+1个区块的随机性取决于产生第N个区块的验证者。这就允许验证者通过简单的跳过一次产生区块的机会来操纵随机性。这里的机会成本等于一个区块奖励，但是有时候新的随机数种子将在接下来的几十个区块中使得验证者获取多于平均值区块产生权的区块数。请参阅<a href="http://vitalik.ca/files/randomness.html" target="_blank" rel="noopener">此处</a>查阅更详细的信息。</li>
</ol>
<p>​        1和 2 很容易就能够解决；一般的方法是要求验证者提前将他们的代币抵押，并且避免使用会被轻易操纵的数据信息作为随机性的源数据。</p>
<p>​    有几种主要的策略来解决类似 3 的问题。</p>
<p>​    第一种是使用基于<a href="https://en.wikipedia.org/wiki/Secret_sharing" target="_blank" rel="noopener">秘密共享</a>或<a href="https://eprint.iacr.org/2002/081.pdf" target="_blank" rel="noopener">确定性阈值签名</a>的方案，并且让验证者合作产生随机数值。这些方案能够抵抗所有操纵（随机数数的行为），除非验证者中的大多数勾结起来一起作假（在某些情况下，根据具体实现，33%-50% 的验证者勾结才可以干涉操作，导致协议必须假设有 67% 的活跃诚实节点）。</p>
<p>​    第二种是使用加密经济方案，此类方案中，验证者提前提交信息（即先发布  <code>sha3(x)</code> ），之后必须在区块中发布 <code>x</code> ；然后将 <code>x</code> 添加到随机数池中。针对此类方案，有两种理论攻击方式：</p>
<ol>
<li>在提交阶段操纵 x 。这是不切实际的，因为随机结果将考虑许多提交者的数值，只要有一个参与者是诚实的，那么输出结果就是均匀分布的。均匀分布与任意多的偏分布一起进行逻辑异或（XOR）的结果依旧是均匀分布的。</li>
<li>选择性避免发布区块。然而，该攻击将消耗一个区块奖励的机会成本，因为该方案中使得任何人都不能看到下一个区块以外的将来的验证者，所以这种攻击几乎不会提供超过一个区块奖励的收益。唯一的例外是，如果一个验证者故意轮空（跳过该区块的产生机会），队列中的下一个验证者<strong>和</strong>该验证者的“子验证者”将是相同的验证者；如果这些情况变得很严重，那么我们可以通过明确的轮空罚款来进一步惩罚（这些行为）。</li>
</ol>
<p>​    第三种方案是使用<a href="https://arxiv.org/pdf/1406.5694.pdf" target="_blank" rel="noopener"> Iddo Bentov的 “多数信号”</a>，该方案中使用其他信号产生的前 N 个随机数的 bit-majority （众数位）来生成一个随机数（即如果大多数源数据的第一位是 1，那么结果的第一位是1，否则是0，如果大多数源数据的第二位是1，那么结果的第二位是1，否则是0，依此类推）。该方案的成本为 <code>~C * sqrt(N)</code> ，其中 <code>C</code> 为下层（源）信号的产生成本。</p>
<p>​    总之，因此，已经有许多已知的 “权益研磨”攻击的解决方案；这个问题更像是<a href="https://en.wikipedia.org/wiki/Differential_cryptanalysis" target="_blank" rel="noopener">差分密码分析</a>而不是<a href="https://en.wikipedia.org/wiki/Halting_problem" target="_blank" rel="noopener">停</a><a href="https://en.wikipedia.org/wiki/Halting_problem" target="_blank" rel="noopener">机</a><a href="https://en.wikipedia.org/wiki/Halting_problem" target="_blank" rel="noopener">问题</a>，这个头疼的问题最终被权益证明的设计者们理解并知道如何去克服，它并不是一个根本的、无法避免的缺陷。</p>
</blockquote>

        
      </div>
      
      
      
    </div>
    



    
    
    
  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">吃不胖的小鱼</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/zxy/archives/">
                
                    <span class="site-state-item-count">17</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/zxy/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">6</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/zxy/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">11</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/zxy110" title="GitHub &rarr; https://github.com/zxy110" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:zxy_whu@qq.com" title="E-Mail &rarr; mailto:zxy_whu@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#POS概论"><span class="nav-text">POS概论</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#一-最初的POS-来源"><span class="nav-text">一 最初的POS (来源)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#二-POS的演变-来源"><span class="nav-text">二 POS的演变 (来源)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#验证者选择机制是如何工作的，什么是“权益研磨（Grinding）”？"><span class="nav-text">验证者选择机制是如何工作的，什么是“权益研磨（Grinding）”？</span></a></li></ol></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">吃不胖的小鱼</span>

  

  
</div>









        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="post-meta-item-icon">
      <i class="fa fa-user"></i>
    </span>
    <span class="site-uv" title="总访客量">
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  

  
    <span class="post-meta-divider">|</span>
  

  
    <span class="post-meta-item-icon">
      <i class="fa fa-eye"></i>
    </span>
    <span class="site-pv" title="总访问量">
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
  
</div>









        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/zxy/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/zxy/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/zxy/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/zxy/js/src/utils.js?v=7.0.1"></script>

  <script src="/zxy/js/src/motion.js?v=7.0.1"></script>



  
  


  <script src="/zxy/js/src/affix.js?v=7.0.1"></script>

  <script src="/zxy/js/src/schemes/pisces.js?v=7.0.1"></script>



  
  <script src="/zxy/js/src/scrollspy.js?v=7.0.1"></script>
<script src="/zxy/js/src/post-details.js?v=7.0.1"></script>



  


  <script src="/zxy/js/src/bootstrap.js?v=7.0.1"></script>


  
  


  


  




  

  

  
  

  
  

  


  

  

  

  

  

  

  

  

  

  

</body>
</html>
